!function(){var t={333:function(t,e,a){"use strict";a.r(e);e.default='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Async Race</title> </head> <body> </body> </html>'},686:function(t,e,a){"use strict";a.r(e)},753:function(t){t.exports='<svg fill="#fede00" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280 640" preserveAspectRatio="xMidYMid meet" xmlns:v="https://vecta.io/nano"><path d="M352.5 105.9c-7.2 1.8-7.9 2.8-9 12.1-.4 3-1.1 6.2-1.6 7.1-.4.9-9.7 5.1-20.6 9.4-77.4 30.4-134.8 54-160.3 66.1-16.3 7.7-22.2 9.1-42.1 10.4-8.5.5-17 1.4-18.9 2-10.1 3.2-36.2 5.8-62 6.3l-11.5.2-4.7 8c-4.7 7.8-4.7 8-2.9 10 3.4 3.6 3.5 7.7.5 17.7-3 9.9-3.4 17.8-1.9 37 .5 6.7.4 8.8-.6 8.8-2.9 0-8.3 5.6-11 11.4-5 10.6-7.4 34.3-4.8 46.7 1.3 5.8 1.3 6.2.3 15.9-.5 5.4 1.6 23.8 2.8 24.4.2.1 2.9 2 6.1 4.1 7.3 4.9 12.3 10.3 13.2 14.3 1.7 7.9 16.7 15.5 35.5 18.1 10.4 1.5 96.9 9.7 108.7 10.4l3.2.2.5-16c.7-23 5-39.4 14.6-55.9 28.1-47.9 91.7-67.3 140.5-42.9 31.6 15.9 53 42.4 59.8 74.2 2.2 10.6 2.9 36.5 1.3 51.9l-.8 8.2H687l299.5-1.8c-3.3-8.7-5.6-32.5-4.5-46.1 2.8-32 17.7-56.7 45.9-75.9 39.9-27.3 84.7-28.2 124.3-2.4 23.9 15.7 39.7 39.2 46 68.7 1.8 8.4 1.5 34.1-.5 43-.8 3.8-1.4 7.1-1.2 7.3.7.8 38.6-2 47.8-3.4 18-2.8 25.3-6.5 30.4-15.2 2.4-4.1 2.8-5.7 2.8-12.7-.1-4.4-.9-11.7-2-16.3-1.8-7.9-1.8-8.8-.2-19 3.1-19.9 4-30.6 4.1-49.7.1-17.6-.1-19.5-2.3-26-4.6-13.5-10.3-19-28.3-27.4-22.2-10.4-63.3-22-116.8-33-52.3-10.8-152.4-21-205.4-21.1h-22.9l-23.6-13.9c-81.3-47.7-159.3-88.4-185.2-96.6-49.8-15.7-159.8-19.5-289.2-10l-18.8 1.4-4.7-3c-9.2-5.8-22.3-8.9-29.7-7zM543.7 137c1.3 4.5 5.8 30.5 8.8 51.5 3.3 22.6 7.4 53.9 7.1 54.2-.7.7-167.2-4-205.4-5.8-35.7-1.6-46.4-5.6-57.3-21.5-6.2-9.1-8.7-22.5-5.9-32.6 1.2-4 5.6-7.4 19.2-14.8 36.9-19.8 79.9-28.9 161.8-34 24.6-1.5 29-1.6 51-1.6l19.4.1 1.3 4.5zm64.9-1c38.3 3.6 71.7 8.6 93.4 13.9 21 5.2 45.1 16.3 72 33.2 14.1 8.8 37.9 25.9 38 27.1 0 .5-1.4.8-3.2.8-4.8 0-11.4 3.7-14 7.8-2.4 3.9-3 11.3-1.5 18.9l.9 4.3h-90.4-90.4l-17.6-54-17.5-54h4.7c2.5 0 14.1.9 25.6 2zM261.7 327.5c-43.1 8.2-77.4 44-83.8 87.5-1.7 11.7-.7 29.2 2.4 41 11.3 43.6 49.7 75.1 94.7 77.7 50.7 2.9 95.9-31.3 107.6-81.3 2.8-11.7 2.6-34.8-.4-46.7-9.4-37.8-38.3-67-76-76.8-10.5-2.7-33.6-3.4-44.5-1.4zm37.8 31c8.4 2.1 20.9 8.5 28 14.2 11.6 9.4 21 24.2 25.1 39.3 2.3 8.7 2.4 26 0 35.5-5.8 23.7-24.2 43.9-47.3 51.9-53.1 18.6-107.4-27.7-96.9-82.8 3-15.2 9.4-27.4 20.6-38.6 11.1-11 23.7-17.8 38.5-20.6 8.4-1.6 23.5-1.1 32 1.1zm-7.7 24.7c.2 9 .7 16.7 1.2 17.2 1.7 1.7 10.8-5.8 20.1-16.6l5.1-5.7-4.8-3.1c-5.2-3.3-13.1-6.5-18.5-7.5l-3.4-.6.3 16.3zM259.1 370c-6.2 2.2-16.7 8.2-16.4 9.4.3 1.3 23.7 21.6 24.9 21.6.7 0 1.5-.7 1.8-1.6.8-2 .8-12.7-.1-23.2-.7-9.5-.8-9.6-10.2-6.2zm61.8 34.5c-5.7 6.4-10.5 12.3-10.7 13.1-.6 2.5 4.6 3.5 15.7 2.9 5.8-.3 12.1-.8 13.9-1.1 3.3-.5 3.4-.6 2.7-4.2-.7-4.4-6.4-16.7-9.2-20.1l-1.9-2.4-10.5 11.8zm-94.9-5.4c-3.1 4.4-6.8 13.3-7.7 18.6l-.6 3.3h15.5c16.5 0 20.1-.9 18.1-4.4-1.3-2.4-20.4-21.6-21.4-21.6-.5 0-2.2 1.8-3.9 4.1zm52.6 5.5c-3.6 3.5 0 8.7 4.4 6.4 2.6-1.4 2.6-5.6.1-7-2.5-1.3-2.7-1.3-4.5.6zm-3.5 16.8c-5.7 3.2-6.8 11.1-2.2 15.7 4.3 4.2 10.1 4.3 14.3.1s4.1-10-.1-14.3c-3.3-3.2-7.8-3.8-12-1.5zm-19.1 5c-1.9 2.3-.8 6.1 1.8 6.4 4.4.7 6.7-3.2 3.6-6.2-1.9-2-3.8-2-5.4-.2zm44.2 1.2c-2.7 1.9-2.8 3.6-.3 5.8 2.5 2.3 6.1.6 6.1-2.9 0-3.3-3-4.9-5.8-2.9zm-75.7 13.1c-7.7.6-7.6.5-5.9 6.5 1.6 5.5 6.1 14.6 9.2 18.6l1.8 2.3 10.3-12.2c5.7-6.7 10.4-12.9 10.5-13.8.1-1.4-1.4-1.6-10.4-1.7-5.8 0-12.7.1-15.5.3zm92 1.2c-4.4.4-6.1 1-6.3 2.2-.3 1.6 21 22.9 22.8 22.9 2.2 0 8.6-14.1 10.5-22.8l.7-3.2-10.9.2c-5.9.1-13.5.4-16.8.7zm-38.9 6.7c-1.9 1.8-1.9 2-.6 4.5.6 1.1 2.1 1.9 3.5 1.9 2 0 4.5-2.4 4.5-4.4 0-1-3.2-3.6-4.5-3.6-.7 0-2.1.7-2.9 1.6zm-18.7 17.1c-8.6 9-13.9 15.1-13.9 16.2 0 2.5 17.9 10.1 23.6 10.1h2.7l-.7-14.3c-.9-16.6-1.3-18.7-3.5-18.7-.9 0-4.6 3-8.2 6.7zm34.7-5.8c-.6 1-2.4 16.8-2.9 25.8-.3 6-.2 6.3 1.9 6.3 7.9 0 26.2-6.8 24.8-9.2-.5-.7-5.3-6.4-10.8-12.6-9.3-10.5-11.7-12.4-13-10.3zm778.7-132.4c-31.8 5.8-59.7 26.6-74.3 55.5-22.3 44.1-9.8 99.6 28.9 128.8 11.2 8.4 18.8 12.5 31.1 16.6 27.4 9.1 54.5 7 80.2-6.1 55.2-28.2 73.5-98.3 39.2-150-22.5-33.9-65.1-52.1-105.1-44.8zm38.5 31.5c34.8 9.8 57.9 44.3 53.2 79.6-6.7 50.8-59.6 79.6-105.5 57.4-23.9-11.6-39.6-35.2-41.2-62-2-33.5 19.2-64 51.6-74.5 12.2-4 28.9-4.2 41.9-.5zm-9.1 24.2c.3 9 .9 16.7 1.4 17.2 1.3 1.4 5.3-1.8 15.5-12.2l9.5-9.7-2.3-1.8c-5-4-18.9-9.7-23.5-9.7-1 0-1.1 3.3-.616.2zm-31.2-13.8c-5 1.6-13.3 5.8-16.3 8.2l-2.3 1.9 12.1 10.7c6.7 6 12.8 10.8 13.5 10.8 2.3 0 2.7-3.9 2-18.6-.8-16.2-.4-15.7-9-13zm60.2 35.2c-5.9 6.5-10.7 12.6-10.7 13.6 0 1.1 1.1 1.8 3.8 2.2 4.4.7 27.8-.7 28.9-1.7 1.5-1.6-5.1-18.3-9.4-23.6l-1.9-2.4-10.7 11.9zm-94.5-5.9c-3.9 6.2-7 13.4-7.8 18.4l-.7 3.9h15.2c8.6 0 16.1-.5 17.2-1 1.7-1 1.8-1.3.5-3.8-.8-1.5-5.9-7.1-11.4-12.5l-9.9-9.9-3.1 4.9zm52.6 5.4c-2.4 1.4-2.3 5.6.2 6.9 4.4 2.3 8-2.9 4.4-6.4-1.8-1.9-2.3-1.9-4.6-.5zm-3.7 17.2c-4.9 2.9-6.6 10.1-3.5 14.6.9 1.3 3.2 2.9 5 3.7 2.9 1.2 3.9 1.2 6.8 0 9.9-4.1 8.5-18-1.9-19.2-2.4-.3-5 .1-6.4.9zm-19.1 5.1c-1.9 2.3-.8 6.1 1.8 6.4 4.4.7 6.7-3.2 3.6-6.2-1.9-2-3.8-2-5.4-.2zm43.6 1.2c-.9.8-1.6 2.2-1.6 2.9 0 1.3 2.6 4.5 3.6 4.5 2 0 4.4-2.5 4.4-4.5 0-1.4-.8-2.9-1.9-3.5-2.5-1.3-2.7-1.3-4.5.6zm-76.1 13.3c-6 .6-6 .6-5.7 3.6.9 6.9 10.4 24.8 12.2 22.9 5.7-6.1 21-25 20.7-25.8-.4-1.2-17.6-1.7-27.2-.7zm93.2.8c-6.8.5-7.9 1.9-4.7 6 2.3 3.1 20 19.3 21 19.3.3 0 2-2.4 3.7-5.3 2.9-4.8 5.2-11.1 6.7-18l.6-2.7-10.7.2-16.6.5zM1087 449c-1.6 3.1.4 6.2 3.8 5.8 2.1-.2 2.8-.9 3-3.2.5-4.5-4.7-6.5-6.8-2.6zm-21.9 20.7c-5.6 5.9-10.1 11.3-10.1 12 0 2.8 17.2 10.3 23.7 10.3h2.6l-.7-12.3c-1-17.9-1.5-20.7-3.6-20.7-1 0-6.3 4.8-11.9 10.7zm38.4-9.8c-.7 1.2-2.3 14.4-2.9 24.3-.4 7.7-.4 7.8 1.9 7.8 4.5 0 13-2.2 19.3-5.1l6.4-2.9-1.9-2.3c-6.5-8.2-19.8-22.7-20.9-22.7a2.65 2.65 0 0 0-1.9.9z"></path></svg>'},100:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layout=void 0;const n=a(498),r=a(194),s=a(614),i=a(726);e.Layout=class{constructor(){this._winners=new s.Winners,this._garage=new r.Garage(this._winners),this._header=new n.Header((()=>this.draw(this._garage.getContainer())),(()=>this.draw(this._winners.getContainer())))}draw(t){const e=document.querySelector(".article");e&&e.parentElement&&e.parentElement.replaceChild(t,e)}firstDraw(){const t=(0,i.createElement)("main","main");t.appendChild(this._garage.getContainer()),document.body.appendChild(t)}}},58:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentMain=void 0;const n=a(978),r=a(284),s=a(726),i=a(425);class o extends n.Component{replaceElement(t){const e=t.className.split(" ");let a;a=e.length>1?this._container.querySelector(`.${e[0]}`):this._container.querySelector(`.${t.className}`),a?(this._container.replaceChild(t,a),a.remove()):this._container.appendChild(t)}async createTitle(t=this._container){const e=this._container.classList.contains("winners"),a=e?"Winners ":"Garage ",n=(0,s.createSpans)(`${t.className}__title`,a,void 0,r.Spans.H2);this.replaceElement(n);const{WINNERS:c,GARAGE:l}=r.ApiUrls,u=e?`${c}?_sort=${r.TypeDataSort.TIME}&_order=${r.Order.ASC}`:l,{data:d}=await(0,i.getData)(u);e?o._winnersData=d:o._carsData=d;const h=d.length.toString();(0,s.createSpans)(`${t.className}__number`,`(${h})`,n,r.Spans.SPAN)}setNumberPage(t){this._numberPage.innerText=`${t}`}getNumberPage(){return parseInt(this._numberPage.innerText||"0",10)}createNumberPage(t=this._container){const e=(0,s.createSpans)(`${t.className}__page-title`,"Page #",t,r.Spans.H3);this._numberPage=(0,s.createSpans)(`${t.className}__page-number`,"1",e,r.Spans.SPAN)}}e.ComponentMain=o},978:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const n=a(726);e.Component=class{constructor(t,e){this._container=(0,n.createElement)(t,e)}getContainer(){return this._container}}},194:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Garage=void 0;const n=a(978),r=a(964),s=a(306);class i extends n.Component{constructor(t){super("article","article garage-page"),this._carFleet=new s.CarFleet(t),this._workshop=new r.Workshop(this._carFleet,t),this._container.appendChild(this._workshop.getContainer()),this._container.appendChild(this._carFleet.getContainer())}}e.Garage=i},306:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CarFleet=void 0;const n=a(726),r=a(58),s=a(957),i=a(284),o=a(425);class c extends r.ComponentMain{constructor(t){super("section","garage"),this._winners=t,this.createTitle().then((()=>{this.createNumberPage(),this.createContainerCars(),this._changeButtons=this.createChangeButton(),this.blockChangePage(),this.createDialog(),t.createTableRow(),t.createChangeButton()}))}async updateCarage(){await this.createTitle(),this.createContainerCars(),this._changeButtons&&this.blockChangePage()}createContainerCars(){const t=(0,n.createDiv)("garage__cars");this._carsPage=[];let e=7*(this.getNumberPage()-1),a=e+7;for(a>r.ComponentMain._carsData.length&&(a+=r.ComponentMain._carsData.length-a);e<a;e+=1){const a=new s.Car(r.ComponentMain._carsData[e]);this._carsPage.push(a),t.appendChild(a.getContainer());const{id:n}=r.ComponentMain._carsData[e];a.getSelect().addEventListener("click",(async()=>{a.selectUpdate()})),a.getRemove().addEventListener("click",(async()=>{await(0,o.deleteData)(`${i.ApiUrls.GARAGE}/${n}`)&&this.updateCarage(),await(0,o.deleteData)(`${i.ApiUrls.WINNERS}/${n}`),await this._winners.createTitle(),this._winners.createTableRow()}))}this.replaceElement(t)}createChangeButton(){const t=(0,n.createDiv)("garage__click-page",this._container),e=(0,n.createButton)("button garage__page-back","Back",t);e.addEventListener("click",(()=>this.changePage("back")));const a=(0,n.createButton)("button garage__page-next","Next",t);return a.addEventListener("click",(()=>this.changePage("next"))),{back:e,next:a}}createDialog(){this._dialog=(0,n.createElement)("dialog","dialog",this._container);const t=(0,n.createDiv)("dialog__container",this._dialog);(0,n.createSpans)("dialog__win","WIN!!!",t,i.Spans.H2),(0,n.createSpans)("dialog__winner","",t,i.Spans.H3)}blockChangePage(){const t=this.getNumberPage(),e=r.ComponentMain._carsData.length;this._changeButtons.back.disabled=1===t,this._changeButtons.next.disabled=e<=7*t}changePage(t){let e;switch(t){case"back":e=-1;break;case"next":e=1;break;default:return}this.setNumberPage(this.getNumberPage()+e),this.createContainerCars(),this.blockChangePage()}}e.CarFleet=c},957:function(t,e,a){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Car=void 0;const r=a(978),s=a(284),i=n(a(753)),o=a(706),c=a(726),l=a(377);class u extends r.Component{constructor(t){super("div","garage__car"),this._carData=t,this.createCarLayout()}createCarLayout(){const t=(0,c.createDiv)("garage__car-header-buttons",this._container);this._selectButton=(0,c.createButton)("button garage__car-select","select".toUpperCase(),t),this._selectButton.addEventListener("click",(()=>this.selectUpdate())),this._removeButton=(0,c.createButton)("button garage__car-remove","remove".toUpperCase(),t),(0,c.createSpans)("garage__car-name",this._carData.name,t,s.Spans.H3);const e=(0,c.createDiv)("garage__car-race",this._container),a=(0,c.createDiv)("garage__car-pedal-buttons",e);this._startEngine=(0,c.createButton)("garage__car-pedal garage__car-start","A",a),this._stopEngine=(0,c.createButton)("garage__car-pedal garage__car-stop","B",a),this._stopEngine.disabled=!0;const n=(0,c.createDiv)("garage__car-field",e);n.innerHTML+=i.default,this._carSvg=n.querySelector("svg"),this._carSvg.classList.add("garage__car-svg"),this._carSvg.setAttribute("fill",this._carData.color),this._startEngine.addEventListener("click",(()=>this.startEngine())),this._stopEngine.addEventListener("click",(()=>this.stopEngine()))}async startEngine(){this._startEngine.disabled=!0,this._stopEngine.disabled=!1;const t=await(0,l.carEngine)(this._carData.id,s.EngineStatus.STARTED);if("string"==typeof t.data)return 0;const{data:e}=t,a=`${Math.round(e.distance/e.velocity)}ms`;if(!this._carSvg.parentElement)return 0;this._carSvg.style.transitionDuration=a;const n=this._carSvg.parentElement.offsetWidth-this._carSvg.clientWidth;this._carSvg.style.transform=`translateX(${n}px)`;return await this.breakEngine()}async breakEngine(){const t=await(0,l.carEngine)(this._carData.id,s.EngineStatus.DRIVE);if(500===t.status){const t=window.getComputedStyle(this._carSvg).transform,e=new DOMMatrix(t).m41;this._carSvg.style.transitionDuration="0ms",this._carSvg.style.transform=`translateX(${e}px)`}return t.status}getTimeCar(){const t=this._carSvg.style.transitionDuration;return parseInt(t,10)/1e3}async stopEngine(){this._startEngine.disabled=!1,this._stopEngine.disabled=!0,await(0,l.carEngine)(this._carData.id,s.EngineStatus.STOPPED),this._carSvg.parentElement&&this.carToStart()}carToStart(){this._carSvg.style.transform="translateX(0)",this._carSvg.style.transitionDuration="0s"}selectUpdate(){const t=document.querySelector(".workshop__name-update"),e=document.querySelector(".workshop__color-update"),a=document.querySelector(".workshop__button-update");(0,o.setDisabled)([t,e,a],!1),t.value=this._carData.name,e.value=this._carData.color,a.setAttribute("data-value",this._carData.id.toString())}getRemove(){return this._removeButton}getSelect(){return this._selectButton}}e.Car=u},964:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Workshop=void 0;const n=a(978),r=a(726),s=a(706),i=a(284),o=a(425),c=a(31);class l extends n.Component{constructor(t,e){super("section","workshop"),this._carFlet=t,this._winners=e,this.createform("create",!1),this.createform("update",!0),this.createGlobalFun()}createform(t,e){const a=t[0].toUpperCase()+t.slice(1),n=(0,r.createDiv)(`workshop__container workshop__${t}`,this._container);(0,r.createSpans)("workshop__title",`${a} Car`,n,i.Spans.H3);const o=(0,r.createElement)("form","workshop__form",n),c=(0,r.createInput)(`workshop__name workshop__name-${t}`,i.TypeInput.TEXT,o);c.placeholder="Car name";const l=(0,r.createInput)(`workshop__color workshop__color-${t}`,i.TypeInput.COLOR,o),u=(0,r.createButton)(`button workshop__button workshop__button-${t}`,a,o);u.type="submit",o.addEventListener("submit",(a=>{a.preventDefault(),"create"===t?this.createCar(c.value,l.value):(this.updateCar(c.value,l.value,Number(u.dataset.value)),(0,s.setDisabled)([c,l,u],e)),c.value="",l.value="#000000"})),(0,s.setDisabled)([c,l,u],e)}createGlobalFun(){const t=(0,r.createDiv)("workshop__global",this._container);this._race=(0,r.createButton)("button workshop__race","Race".toUpperCase(),t),this._reset=(0,r.createButton)("button workshop__reset","Reset".toUpperCase(),t);const e=(0,r.createButton)("button workshop__generate-car","Cenerate Cars".toUpperCase(),t);this._reset.disabled=!0,this._race.addEventListener("click",(()=>{this.startRace()})),this._reset.addEventListener("click",(()=>{this.resetCar()})),e.addEventListener("click",(()=>this.randomCar()))}async startRace(){this._race.disabled=!0;let t=!1;await this.stopAllCars(),this._carFlet._carsPage.forEach((async e=>{e.carToStart();const a=await e.startEngine();if(t||200!==a)return;t=!0;const n=this._carFlet._dialog.querySelector(".dialog__winner");if(!n)return;n.innerText=e._carData.name,this._carFlet._dialog.show();const{data:r,status:s}=await(0,o.getData)(`${i.ApiUrls.WINNERS}/${e._carData.id}`);let c=1,l=e.getTimeCar();if(200===s){c=r.wins+1,l=l<r.time?l:r.time;const t={id:e._carData.id,wins:c,time:l};await(0,o.putData)(`${i.ApiUrls.WINNERS}${e._carData.id}`,t)}else{const t={id:e._carData.id,wins:c,time:l};await(0,o.createData)(i.ApiUrls.WINNERS,t)}this._reset.disabled=!1,await this._winners.createTitle(),this._winners.createTableRow()}))}async stopAllCars(){const t=this._carFlet._carsPage.map((async t=>{await t.stopEngine()}));await Promise.all(t)}async resetCar(){this._reset.disabled=!0,await this.stopAllCars(),this._carFlet._dialog.close(),this._race.disabled=!1}randomCar(){for(let t=0;t<100;t+=1){const t=this.getRandomNumber(c.carMarks.length),e=this.getRandomNumber(c.carModelNames.length),a=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),r=Math.floor(256*Math.random()),s=`#${a.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`;this.createCar(`${c.carMarks[t]} ${c.carModelNames[e]}`,s)}}getRandomNumber(t){return Math.floor(Math.random()*t)}async createCar(t,e){const a={name:t,color:e};await(0,o.createData)(i.ApiUrls.GARAGE,a),this._carFlet.updateCarage()}async updateCar(t,e,a){const n={name:t,color:e};await(0,o.putData)(`${i.ApiUrls.GARAGE}/${a}`,n),await this._carFlet.updateCarage(),await this._winners.createTitle(),this._winners.createTableRow()}}e.Workshop=l},498:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const n=a(726);e.Header=class{constructor(t,e){const a=(0,n.createButton)("button header__button","to garage".toUpperCase(),document.body),r=(0,n.createButton)("button header__button","to winners".toUpperCase(),document.body);a.addEventListener("click",t),r.addEventListener("click",e)}}},614:function(t,e,a){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Winners=void 0;const r=a(58),s=a(726),i=a(284),o=a(425),c=n(a(753));class l extends r.ComponentMain{constructor(){super("article","article winners"),this._sortFlags={wins:!1,time:!0},this.createTitle().then((()=>{this.sortWin(i.TypeDataSort.TIME),this.createNumberPage(),this._table=(0,s.createElement)("table","winners__table",this._container),this.createTableHeader()}))}createTableHeader(){this._headers=(0,s.createTableRow)("winners__headers",this._table,i.TypeTableRow.TH);const t=this._headers.querySelectorAll("th");t[0].innerText="#",t[1].innerText="Car",t[2].innerText="Name",t[3].innerText="Wins ↕",t[3].addEventListener("click",(()=>{this.sortWin(i.TypeDataSort.WINS)})),t[3].style.cursor="pointer",t[4].innerText="Best time (s) ↕",t[4].addEventListener("click",(()=>{this.sortWin(i.TypeDataSort.TIME)})),t[4].style.cursor="pointer"}createTableRow(){this._table.querySelectorAll(".winners__row").forEach((t=>{t.remove()}));let t=10*(this.getNumberPage()-1),e=t+10;for(e>r.ComponentMain._winnersData.length&&(e+=r.ComponentMain._winnersData.length-e);t<e;t+=1){const{id:e}=l._winnersData[t],a=l._carsData.findIndex((t=>t.id===e));this._headers=(0,s.createTableRow)("winners__row",this._table);const n=this._headers.querySelectorAll("td");n[0].innerText=`${t+1}`,n[1].innerHTML=c.default;const r=n[1].querySelector("svg");r.classList.add("winners__car-svg"),r.setAttribute("fill",l._carsData[a].color),n[2].innerText=l._carsData[a].name,n[3].innerText=`${l._winnersData[t].wins}`,n[4].innerText=`${l._winnersData[t].time}`}}async sortWin(t){const e=this._sortFlags[t]?i.Order.ASC:i.Order.DESC;this._sortFlags[t]=!this._sortFlags[t];const a=`${i.ApiUrls.WINNERS}?_sort=${t}&_order=${e}`,{data:n}=await(0,o.getData)(a);r.ComponentMain._winnersData=n,this.createTableRow()}createChangeButton(){const t=(0,s.createDiv)("garage__click-page",this._container),e=(0,s.createButton)("button garage__page-back","Back",t);e.addEventListener("click",(()=>this.changePage("back")));const a=(0,s.createButton)("button garage__page-next","Next",t);a.addEventListener("click",(()=>this.changePage("next"))),this._changeButtons={back:e,next:a}}changePage(t){let e;switch(t){case"back":e=-1;break;case"next":e=1;break;default:return}this.setNumberPage(this.getNumberPage()+e),this.createTableRow(),this.blockChangePage()}blockChangePage(){const t=this.getNumberPage(),e=r.ComponentMain._winnersData.length;this._changeButtons.back.disabled=1===t,this._changeButtons.next.disabled=e<=7*t}}e.Winners=l},284:function(t,e){"use strict";var a,n,r,s,i,o,c,l;Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDataSort=e.Order=e.TypeTableRow=e.EngineStatus=e.TypeInput=e.RequestMethods=e.ApiUrls=e.Spans=void 0,function(t){t.SPAN="span",t.H2="h2",t.H3="h3"}(a||(e.Spans=a={})),function(t){t.MAIN="http://localhost:3000",t.GARAGE="http://localhost:3000/garage/",t.ENGINE="http://localhost:3000/engine/",t.WINNERS="http://localhost:3000/winners/"}(n||(e.ApiUrls=n={})),function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.PATCH="PATCH"}(r||(e.RequestMethods=r={})),function(t){t.TEXT="text",t.COLOR="color"}(s||(e.TypeInput=s={})),function(t){t.STARTED="started",t.STOPPED="stopped",t.DRIVE="drive"}(i||(e.EngineStatus=i={})),function(t){t.TH="th",t.TD="td"}(o||(e.TypeTableRow=o={})),function(t){t.ASC="ASC",t.DESC="DESC"}(c||(e.Order=c={})),function(t){t.TIME="time",t.WINS="wins"}(l||(e.TypeDataSort=l={}))},377:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.carEngine=void 0;const n=a(284);e.carEngine=async function(t,e){const a=`${n.ApiUrls.ENGINE}?id=${t}&status=${e}`,r=await fetch(a,{method:n.RequestMethods.PATCH});if(!r.ok&&500!==r.status)throw 400===r.status?new Error('Wrong parameters: "id" should be any positive number, "status" should be "started", "stopped" or "drive"'):404===r.status?new Error("Car with such id was not found in the garage."):new Error(`Failed to control engine. Status: ${r.status}`);let s;return s=200===r.status?await r.json():await r.text(),{data:s,status:r.status}}},273:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createData=void 0;const n=a(284);e.createData=async function(t,e){const a=await fetch(t,{method:n.RequestMethods.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(201===a.status)return a.status;throw new Error("Failed to create data")}},486:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteData=void 0;const n=a(284);e.deleteData=async function(t){return(await fetch(t,{method:n.RequestMethods.DELETE})).status}},169:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getData=void 0,e.getData=async function(t){const e=await fetch(t,{method:"GET"});return{data:await e.json(),status:e.status}}},425:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createData=e.putData=e.deleteData=e.getData=void 0;const n=a(169);Object.defineProperty(e,"getData",{enumerable:!0,get:function(){return n.getData}});const r=a(486);Object.defineProperty(e,"deleteData",{enumerable:!0,get:function(){return r.deleteData}});const s=a(404);Object.defineProperty(e,"putData",{enumerable:!0,get:function(){return s.putData}});const i=a(273);Object.defineProperty(e,"createData",{enumerable:!0,get:function(){return i.createData}})},404:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.putData=void 0;const n=a(284);e.putData=async function(t,e){const a=await fetch(t,{method:n.RequestMethods.PUT,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(200!==a.status)throw new Error("Failed to update car attributes");return a.status}},31:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.carModelNames=e.carMarks=void 0,e.carMarks=["Ford","Audi","BMW","Mercedes","Volkswagen","Fiat","Renault","Peugeot","Citroen","Opel","Toyota","Nissan","Honda","Mazda","Mitsubishi","Suzuki","Subaru","Hyundai","Kia","Volvo","Saab","Porsche","Lexus","Jeep","Jaguar","Land Rover","Ferrari","Lamborghini","Bugatti","Maserati"],e.carModelNames=["Focus","A4","X5","C-Class","Golf","Punto","Clio","308","C3","Astra","Fiesta","A3","X3","E-Class","Passat","500","Megane","208","Corsa","Golf","Bentley","Ferrari","Lamborghini","Bugatti","Maserati","Camaro","Mustang","Challenger","Charger","Corvette"]},726:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTableRow=e.createInput=e.createSpans=e.createButton=e.createDiv=e.createElement=void 0;const n=a(284);function r(t,e,a){const n=document.createElement(t);return n.className=e,a&&a?.appendChild(n),n}e.createElement=r,e.createDiv=function(t,e){return r("div",t,e)},e.createButton=function(t,e,a){const n=r("button",t,a);return n.innerText=e,n},e.createSpans=function(t,e,a,s=n.Spans.SPAN){const i=r(s,t,a);return i.innerText=e,i},e.createInput=function(t,e,a){const n=r("input",t,a);return n.type=e,n},e.createTableRow=function(t,e,a=n.TypeTableRow.TD){const s=r("tr",t,e);for(let e=0;e<5;e+=1){const e=r(a,`${t}-cell`);s.appendChild(e)}return s}},706:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setDisabled=void 0,e.setDisabled=function(t,e){t.forEach((t=>{t.disabled=e}))}}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};!function(){"use strict";a(333),a(686);(new(a(100).Layout)).firstDraw()}()}();